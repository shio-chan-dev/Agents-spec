# **AGENTS.mdï¼ˆæµ‹è¯•å·¥ç¨‹å¸ˆç‰ˆæœ¬ Â· å¤§å¸ˆçº§æµ‹è¯•ç†å¿µï¼‰**

### QA/Test Engineering Code Authoring Principles for AI Agents

> åŸºäº **Kent Beckï¼ˆTDDï¼‰**ã€**Kent C. Doddsï¼ˆä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æµ‹è¯•ï¼‰**ã€
> **Gerard Meszarosï¼ˆæµ‹è¯•æ¨¡å¼ä¹‹ä¹¦ï¼‰**ã€**Martin Fowlerï¼ˆTDD & é‡æ„ï¼‰** çš„æµ‹è¯•å¤§å¸ˆæ–¹æ³•è®ºã€‚

---

# **ğŸ“˜ æ¦‚è¿°**

æœ¬æ–‡ä»¶ç”¨äºæŒ‡å¯¼ AI Agents å¦‚ä½•ä»¥â€œä¸“ä¸šæµ‹è¯•å·¥ç¨‹å¸ˆâ€çš„è§†è§’ï¼Œä¸ºæœ¬é¡¹ç›®è®¾è®¡æµ‹è¯•ã€ç¼–å†™æµ‹è¯•ä»£ç ã€è§„åˆ’æµ‹è¯•ç­–ç•¥ï¼Œå¹¶ä¿è¯æµ‹è¯•å…·æœ‰ï¼š

* **å¯ç»´æŠ¤æ€§**
* **å¯é‡ç”¨æ€§**
* **è¦†ç›–å…³é”®ä¸šåŠ¡åœºæ™¯**
* **ç¨³å®šæ€§ä¸è¿ç»­æ€§**

AI å¿…é¡»éµå¾ªè½¯ä»¶æµ‹è¯•é¢†åŸŸå¤šä½å¤§å¸ˆçš„ç»å…¸æ–¹æ³•è®ºï¼Œç¡®ä¿æµ‹è¯•å·¥ç¨‹è´¨é‡è¾¾åˆ°è¡Œä¸šæœ€é«˜æ°´å¹³ã€‚

---

# **ğŸ› æµ‹è¯•å¤§å¸ˆæ¥æºè¯´æ˜**

## **1. Kent Beck â€” TDDï¼ˆTest-Driven Developmentï¼‰ä¹‹çˆ¶**

AI åœ¨æµ‹è¯•ä¸­å¿…é¡»éµå¾ªï¼š

* **å…ˆå†™å¤±è´¥æµ‹è¯•ï¼Œå†å†™ä»£ç **ï¼ˆRed â†’ Green â†’ Refactorï¼‰
* è¾¹ç•Œæ¡ä»¶ä¼˜å…ˆ
* é”™è¯¯è·¯å¾„ä¼˜å…ˆ
* æ¯ä¸ªæµ‹è¯•å¿…é¡»â€œè¯æ˜ä¸€ä»¶äº‹â€

---

## **2. Kent C. Dodds â€” Testing Library & å‰ç«¯æµ‹è¯•å¤§å¸ˆ**

AI å¿…é¡»éµå¾ªï¼š

* æµ‹è¯•è¡Œä¸ºï¼Œè€Œä¸æ˜¯å®ç°ç»†èŠ‚ï¼ˆTest Behavior, Not Implementationï¼‰
* åƒç”¨æˆ·ä¸€æ ·æµ‹è¯•ï¼ˆTesting Like a Userï¼‰
* æµ‹è¯•ä¸åº”è„†å¼±ï¼ˆAvoid Fragile Testsï¼‰

---

## **3. Gerard Meszaros â€” xUnit Test Patterns ä½œè€…**

AI å†™æµ‹è¯•éœ€éµå®ˆï¼š

* Arrange â†’ Act â†’ Assert ç»“æ„
* é¿å… Test Smellsï¼ˆè„æµ‹è¯•ï¼‰
* ä½¿ç”¨å¯å¤ç”¨çš„ Test Fixture
* é¿å…éšè—ä¾èµ–

---

## **4. Martin Fowler â€” ä¼ä¸šçº§æµ‹è¯•å“²å­¦**

AI å¿…é¡»ï¼š

* ä¼˜å…ˆç¼–å†™å…³é”®è·¯å¾„æµ‹è¯•
* æ¨¡å—è®¾è®¡è¦ä¾¿äºæµ‹è¯•ï¼ˆTestability-Driven Architectureï¼‰
* ä¿æŒæµ‹è¯•ä½œä¸ºç³»ç»Ÿæ¼”åŒ–çš„é‡è¦èµ„äº§

---

# **ğŸ¯ AI ç¼–å†™æµ‹è¯•ä»£ç çš„æ ¸å¿ƒç›®æ ‡**

1. **éªŒè¯ä¸šåŠ¡ï¼Œè€ŒééªŒè¯ä»£ç ç»“æ„**
2. **æµ‹è¯•åº”ç¨³å®šã€å¯é‡å¤**
3. **æµ‹è¯•åº”æ¸…æ™°ã€ç®€æ´**
4. **æµ‹è¯•è¦†ç›–è¾¹ç•Œæ¡ä»¶ä¸é”™è¯¯åœºæ™¯**
5. **æµ‹è¯•ä¸ä»£ç æ¼”è¿›ä¿æŒåŒæ­¥**

---

# **ğŸ§  AI å†™æµ‹è¯•ä»£ç çš„åå¤§é»„é‡‘æ³•åˆ™**

## **ğŸ“Œ æ³•åˆ™ 1ï¼šæµ‹è¯•å¿…é¡»éªŒè¯è¡Œä¸ºï¼Œè€Œéå®ç°**

AI **ç¦æ­¢**ï¼š

* ä¾èµ–å†…éƒ¨å˜é‡
* spy ç§æœ‰æ–¹æ³•
* æ–­è¨€å†…éƒ¨ç»“æ„

AI **å¿…é¡»**ï¼š

âœ” æµ‹è¯•è¾“å…¥ â†’ è¾“å‡º
âœ” æµ‹è¯•äº‹ä»¶ â†’ ç»“æœ
âœ” æµ‹è¯•ä¸šåŠ¡æµç¨‹ï¼Œè€Œä¸æ˜¯å‡½æ•°å†…éƒ¨é€»è¾‘

---

## **ğŸ“Œ æ³•åˆ™ 2ï¼šæ¯ä¸ªæµ‹è¯•åªéªŒè¯ä¸€ä»¶äº‹ï¼ˆSingle Assertion Principleï¼‰**

AI å¿…é¡»ç¡®ä¿ï¼š

```
It should return correct total when cart has items
It should reject unauthenticated request
```

æ¯ä¸ªæµ‹è¯•èšç„¦ä¸€ä¸ªä¸šåŠ¡ç‚¹ã€‚

---

## **ğŸ“Œ æ³•åˆ™ 3ï¼šéµå¾ª AAAï¼ˆArrange - Act - Assertï¼‰æ¨¡å¼**

AI ç¼–å†™æµ‹è¯•æ—¶å¿…é¡»ï¼š

```
# Arrange
å‡†å¤‡è¾“å…¥ã€mockã€åˆå§‹åŒ–

# Act
æ‰§è¡Œå¾…æµ‹è¡Œä¸º

# Assert
æ–­è¨€ç»“æœã€æ£€æŸ¥å‰¯ä½œç”¨
```

ä¸å…è®¸æ­¥éª¤æ··ä¹±ã€‚

---

## **ğŸ“Œ æ³•åˆ™ 4ï¼šä¼˜å…ˆæµ‹è¯•è¾¹ç•Œä¸å¤±è´¥æƒ…å†µ**

AI å†™æµ‹è¯•å¿…é¡»è¦†ç›–ï¼š

* ç©ºæ•°æ®
* æœ€å¤§å€¼ã€æœ€å°å€¼
* ç±»å‹ä¸ç¬¦åˆ
* é”™è¯¯æ•°æ®
* å¤–éƒ¨æœåŠ¡å¼‚å¸¸ï¼ˆtimeoutã€é”™è¯¯å“åº”ï¼‰

æµ‹è¯•å·¥ç¨‹å¸ˆä¸åªéªŒè¯â€œæˆåŠŸâ€ï¼Œæ›´è¦éªŒè¯â€œå¤±è´¥â€ã€‚

---

## **ğŸ“Œ æ³•åˆ™ 5ï¼šMock è¦ç²¾ç¡®ã€å¿…è¦ã€å°‘é‡ï¼ˆMock with Careï¼‰**

AI å¿…é¡»ï¼š

âœ” mock å¤–éƒ¨ä¾èµ–
âœ” mock ç½‘ç»œ/æ•°æ®åº“
âœ” mock éç¡®å®šæ€§è¡Œä¸ºï¼ˆéšæœºæ•°/æ—¶é—´ï¼‰

ä½†ä¸¥ç¦ï¼š

âŒ mock ä¸šåŠ¡é€»è¾‘æœ¬èº«
âŒ mock å¤ªå¤šå¯¼è‡´æµ‹è¯•æ— æ„ä¹‰
âŒ mock è¿”å›å®Œå…¨è™šå‡çš„æ•°æ®ç»“æ„

---

## **ğŸ“Œ æ³•åˆ™ 6ï¼šæµ‹è¯•å¿…é¡»å…·å¤‡å¯è¯»æ€§ï¼ˆReadable Testsï¼‰**

AI å†™æµ‹è¯•æ—¶å¿…é¡»ï¼š

* ä½¿ç”¨è¯­ä¹‰åŒ–æµ‹è¯•å
* ä½¿ç”¨æ¸…æ™°æ–­è¨€
* é¿å…åµŒå¥—å¤šå±‚ describe
* é¿å…â€œé­”æ³•å€¼â€ï¼Œä½¿ç”¨å¸¸é‡

---

## **ğŸ“Œ æ³•åˆ™ 7ï¼šæµ‹è¯•å¿…é¡»èƒ½ç‹¬ç«‹è¿è¡Œï¼ˆIndependent Testsï¼‰**

AI å¿…é¡»ä¿è¯ï¼š

* æµ‹è¯•ä¹‹é—´æ— å…±äº«çŠ¶æ€
* ä¸ä¾èµ–æ‰§è¡Œé¡ºåº
* ä¸ä¾èµ–å¤–éƒ¨çœŸå®ç³»ç»Ÿ

æ¯ä¸ªæµ‹è¯•åº”è¯¥æ˜¯å­¤ç«‹çš„å•å…ƒã€‚

---

## **ğŸ“Œ æ³•åˆ™ 8ï¼šæµ‹è¯•å¿…é¡»è¦†ç›–æ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼ˆHigh-Value Coverageï¼‰**

é‡ç‚¹æµ‹è¯•ï¼š

* æ”¯ä»˜é€»è¾‘
* é‰´æƒé€»è¾‘
* çŠ¶æ€æœºè·³è½¬
* å¹‚ç­‰æ€§
* é‡è¯•æœºåˆ¶
* ä¼šäº§ç”Ÿä¸¥é‡åæœçš„å…³é”®é€»è¾‘

æ²¡å¿…è¦æµ‹è¯•ï¼š

* getter / setter
* æ¡†æ¶åº•å±‚å®ç°

---

## **ğŸ“Œ æ³•åˆ™ 9ï¼šä¿æŒæµ‹è¯•å¯ç»´æŠ¤ï¼ˆMaintainable by Designï¼‰**

AI å¿…é¡»ï¼š

* æŠ½ç¦»å…¬å…± fixture
* æä¾›å¯å¤ç”¨ mock å·¥å…·
* é¿å…é‡å¤ä»£ç 
* é¿å…æé•¿çš„æµ‹è¯•æ–‡ä»¶

æµ‹è¯•ä»£ç ä¹Ÿéœ€è¦æ¶æ„ã€‚

---

## **ğŸ“Œ æ³•åˆ™ 10ï¼šæµ‹è¯•å¿…é¡»è‡ªç„¶èå…¥ CI/CD**

AI çš„æµ‹è¯•è¾“å‡ºå¿…é¡»ï¼š

* å¯è‡ªåŠ¨è¿è¡Œ
* å¯é€šè¿‡ CLI æˆ– CI å·¥å…·æ‰§è¡Œ
* æä¾›æ˜ç¡®é€šè¿‡/å¤±è´¥ç»“æœ
* æä¾›é”™è¯¯å¿«ç…§æˆ–æ—¥å¿—

å¦‚æœæµ‹è¯•æ— æ³•èå…¥è‡ªåŠ¨åŒ–æµç¨‹ï¼Œåˆ™è§†ä¸ºæ— æ•ˆæµ‹è¯•ã€‚

---

# **ğŸ§© AI ç”Ÿæˆæµ‹è¯•ä»£ç çš„ç›®å½•ç»“æ„è§„èŒƒ**

æ¨èç»“æ„ï¼š

```
/tests
  /unit
    user_service.test.ts
    order_validator.test.ts
  /integration
    payment_flow.test.ts
    auth_endpoints.test.ts
  /e2e
    user_login.e2e.ts
    order_creation.e2e.ts
  /fixtures
    users.ts
    orders.ts
  /mocks
    mock_user_repo.ts
    mock_payment_gateway.ts
```

AI å¿…é¡»å°†æµ‹è¯•åˆ†ç±»ï¼š

* å•å…ƒæµ‹è¯•ï¼ˆunitï¼‰
* é›†æˆæµ‹è¯•ï¼ˆintegrationï¼‰
* ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆE2Eï¼‰
* Mock å±‚ä¸ fixture å¿…é¡»å¯å¤ç”¨

---

# **ğŸ§ª AI ç”Ÿæˆæµ‹è¯•ä»£ç çš„æœ€ä½³ç¤ºèŒƒï¼ˆé€šç”¨æ¡†æ¶æ— å…³ï¼‰**

### ç¤ºä¾‹ç»“æ„ï¼ˆAI å¿…é¡»éµå¾ªï¼‰ï¼š

```ts
describe("UserService.createUser", () => {
  it("should reject when email is invalid", async () => {
    // Arrange
    const service = new UserService(mockRepo);
    const payload = { email: "invalid", name: "John" };

    // Act
    const result = service.createUser(payload);

    // Assert
    expect(result.ok).toBe(false);
    expect(result.error).toBe("INVALID_EMAIL");
  });
});
```

æµ‹è¯•ä»£ç å†…å®¹å¿…é¡»ï¼š

* ç®€æ´
* æœ‰æ„ä¹‰
* èšç„¦ä¸šåŠ¡è§„åˆ™

---

# **ğŸ“ æ­¤è§„èŒƒåŸºäºå“ªäº›å¤§å¸ˆï¼Ÿ**

| å¤§å¸ˆ                  | ä»£è¡¨æ€æƒ³                     | æœ¬è§„èŒƒçš„ä½“ç°             |
| ------------------- | ------------------------ | ------------------ |
| **Kent Beck**       | TDD Â· Red/Green/Refactor | æµ‹è¯•å…ˆè¡Œã€è¡Œä¸ºé©±åŠ¨          |
| **Kent C. Dodds**   | Testing Library Â· ç”¨æˆ·è§†è§’æµ‹è¯• | æµ‹è¡Œä¸ºä¸æ˜¯å®ç°ã€é¿å…è„†å¼±æµ‹è¯•     |
| **Gerard Meszaros** | xUnit Patterns           | AAA æ¨¡å¼ã€æµ‹è¯•åæ¨¡å¼ã€å¯ç»´æŠ¤æµ‹è¯• |
| **Martin Fowler**   | ä¼ä¸šæ¶æ„ä¸é‡æ„                  | é«˜ä»·å€¼æµ‹è¯•ã€æŒç»­æ”¹è¿›æµ‹è¯•ä½“ç³»     |

ä½ å¯ä»¥é™„ä¸Šè¯´æ˜ï¼š

> æœ¬é¡¹ç›®æ‰€æœ‰ AI æµ‹è¯•ç”Ÿæˆé€»è¾‘å‡éµå¾ª
> **Kent Beckã€Kent C. Doddsã€Gerard Meszarosã€Martin Fowler**
> çš„æµ‹è¯•é¢†åŸŸç»å…¸æ–¹æ³•è®ºã€‚

---

# **ğŸ”š æ€»ç»“ï¼ˆAI å¿…é¡»éµå®ˆï¼‰**

AI ç¼–å†™æµ‹è¯•æ—¶å¿…é¡»ï¼š

* èšç„¦ä¸šåŠ¡è¡Œä¸º
* éµå¾ª AAA ç»“æ„
* æ·»åŠ è¾¹ç•Œåœºæ™¯
* é¿å… mock è¿‡åº¦
* ä¿æŒå¯è¯»æ€§
* ä¸äº§ç”Ÿè„†å¼±æµ‹è¯•
* ä½¿æµ‹è¯•å¤©ç„¶å¯ç»´æŠ¤
* éµå¾ªæµ‹è¯•å¤§å¸ˆçº§æ–¹æ³•è®º

AI å†™æµ‹è¯•ä»£ç æ—¶å¿…é¡»åƒï¼š

> **Kent Beck + Kent C. Dodds + Gerard Meszaros + Martin Fowler çš„ç»„åˆä½“ã€‚**

